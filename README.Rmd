---
output: 
  github_document
---

# ggbrick <img src='dev/images/ggbrick1.png' align="right" height="240" />

Create a 'waffle' style chart with the aesthetic of a brick wall.

Usage is similar to `geom_col` where you supply counts as the height of the bar and a `fill` for a stacked bar. Each whole brick represents 1 unit. Two half bricks equal one whole brick. 

## Installation

Install from CRAN

```{r, eval = TRUE, echo=FALSE}
library(ggplot2)
library(ggbrick)
suppressPackageStartupMessages(library(dplyr))

d10 <- c("#788FCE", "#BD8184", "#E6956F", "#F2CC8F", "#A6BA96", "#C5E8E3", 
         "#F4F1DE", "#CDC3D4", "#A88AD2", "#60627C")
```

```{r, eval = FALSE}
install.packages("ggbrick")
```

Or from Git.

```{r, eval = FALSE}
devtools::install_github("doehm/ggbrick")
```

Simple example

```{r, eval = TRUE, fig.width=14}

library(ggplot2)
library(ggbrick)

mpg |>
  count(class, drv) |>
  ggplot() +
  geom_brick(aes(class, n, fill = drv)) +
  scale_fill_brewer(type = "qual") +
  coord_brick()

```

<!-- <img src='dev/images/pic0.png'> -->

The fill can be randomised to create a different look with `type = 'random'` or `type = 'soft_random'`.

```{r, fig.width=14}
mpg |>
  count(class, drv) |>
  ggplot() +
  geom_brick(aes(class, n, fill = drv), type = "random") +
  scale_fill_brewer(type = "qual") +
  coord_brick()

mpg |>
  count(class, drv) |>
  ggplot() +
  geom_brick(aes(class, n, fill = drv), type = "soft_random") +
  scale_fill_brewer(type = "qual") +
  coord_brick()
```


<!-- <img src='dev/images/pic2.png'> -->

In this case each brick represents a car (a row) in `mpg`. 

You can also adjust the number of bricks per layer with the `bricks_per_layer` parameter.

```{r, eval = TRUE}
ggplot() +
  geom_brick(aes(x = 1, y = 96), fill = "firebrick", bricks_per_layer = 8)
```

<!-- <img src='dev/images/pic3.png'> -->

You can control with width with `width`. To keep the right aspect ratio also use `coord_brick(width = 0.5)`

```{r, fig.width=14}
mpg |>
  count(class, drv) |>
  ggplot() +
  geom_brick0(aes(class, n, fill = drv), width = 0.5) +
  coord_brick(width = 0.5) +
  scale_fill_brewer(type = "qual")
```


## Waffle

To create a more familiar waffle chart you can use `geom_waffle0()` and `geom_waffle()`. `geom_waffle0()` is just `geom_waffle()` with `gap = 0`.

```{r, eval = TRUE, fig.width=14}
mpg |>
  count(class, drv) |>
  ggplot() +
  geom_waffle0(aes(class, n, fill = drv))+
  coord_waffle() +
  scale_fill_brewer(type = "qual")

mpg |>
  count(class, drv) |>
  ggplot() +
  geom_waffle(aes(class, n, fill = drv), gap = 0.02)+
  coord_waffle() +
  scale_fill_brewer(type = "qual")
```

To flip the coords you'll have to use `theme(aspect.ratio = x)` to maintain the brick aspect ratio (square in the case of waffle)

```{r, fig.width=14}
mpg |>
  count(class, drv) |>
  ggplot() +
  geom_waffle0(aes(class, n, fill = drv)) +
  scale_fill_brewer(type = "qual") +
  coord_flip() +
  theme(
    aspect.ratio = 2
  )
```

